
> inventory-tracker@1.0.0 test
> tsx scripts/test.ts tests/dashboard.spec.ts


--- Killing stale processes ---

--- Cleaning up stale test branches ---
Deleting stale branch: test-worker-1771972395977-cszkif

--- Creating ephemeral branch: test-worker-1771973109241-f3fywb ---
Branch created: br-patient-butterfly-ai6jrn6q

--- Initializing schema on test branch ---
Schema initialized.

--- Seeding test data ---
Seed data inserted successfully.

--- Removing stale recordings ---

--- Running Playwright: tests/dashboard.spec.ts ---
[2m[WebServer] [22m[33mâ ‹[39m Waiting for Vite dev server to be ready on port 5173
[2m[WebServer] [22m[1G[2m[WebServer] [22m[33mâ ™[39m Waiting for Vite dev server to be ready on port 5173
[2m[WebServer] [22m[1G[2m[WebServer] [22m[33mâ ¹[39m Waiting for Vite dev server to be ready on port 5173
[2m[WebServer] [22m[32mâˆš[39m Vite dev server ready on port 5173

Running 35 tests using 2 workers

[2m[WebServer] [22m(node:23974) [DEP0060] DeprecationWarning: The `util._extend` API is deprecated. Please use Object.assign() instead.
[2m[WebServer] [22m(Use `node --trace-deprecation ...` to show where the warning was created)
  âœ“   2 tests/dashboard.spec.ts:33:3 â€º NavigationHeader â€º Navigation link for Accounts navigates to AccountsPage (1.8s)
  âœ“   1 tests/dashboard.spec.ts:4:3 â€º NavigationHeader â€º Navigation header displays app branding and all navigation links (2.3s)
  âœ“   3 tests/dashboard.spec.ts:43:3 â€º NavigationHeader â€º Navigation link for Materials navigates to MaterialsPage (1.1s)
  âœ“   4 tests/dashboard.spec.ts:53:3 â€º NavigationHeader â€º Navigation link for Batches navigates to batch listing (1.1s)
  âœ“   5 tests/dashboard.spec.ts:63:3 â€º NavigationHeader â€º Navigation link for Transactions navigates to TransactionsPage (1.1s)
  âœ“   6 tests/dashboard.spec.ts:73:3 â€º NavigationHeader â€º Navigation link for Settings navigates to Settings page (1.2s)
  âœ“   7 tests/dashboard.spec.ts:83:3 â€º NavigationHeader â€º Active navigation link is visually highlighted for the current page (1.3s)
  âœ“   8 tests/dashboard.spec.ts:103:3 â€º LowInventoryAlerts â€º Low inventory alerts section displays with heading and warning icon (2.0s)
  âœ“   9 tests/dashboard.spec.ts:283:3 â€º MaterialsCategoriesOverview â€º Materials categories overview section displays with heading and icon (2.1s)
  âœ“  11 tests/dashboard.spec.ts:292:3 â€º MaterialsCategoriesOverview â€º Each category column shows category name, total items count, and total units count (34.4s)
  âœ“  10 tests/dashboard.spec.ts:113:3 â€º LowInventoryAlerts â€º Each low inventory alert shows severity, material name, current quantity, and reorder point (48.2s)
  âœ“  12 tests/dashboard.spec.ts:321:3 â€º MaterialsCategoriesOverview â€º Each category shows a sample of materials with names and quantities (17.8s)
  âœ“  13 tests/dashboard.spec.ts:174:3 â€º LowInventoryAlerts â€º Low inventory alert View Details link navigates to material detail page (15.3s)
  âœ“  14 tests/dashboard.spec.ts:344:3 â€º MaterialsCategoriesOverview â€º Clicking a material name navigates to the material detail page (15.6s)
  âœ“  15 tests/dashboard.spec.ts:194:3 â€º LowInventoryAlerts â€º Low inventory alert Dismiss button removes the alert (21.1s)
  âœ“  16 tests/dashboard.spec.ts:365:3 â€º MaterialsCategoriesOverview â€º View All Categories link navigates to MaterialsPage (16.9s)
  âœ“  17 tests/dashboard.spec.ts:227:3 â€º LowInventoryAlerts â€º Low inventory alert Reorder button opens new transaction pre-filled for reorder (18.0s)
  âœ“  18 tests/dashboard.spec.ts:375:3 â€º MaterialsCategoriesOverview â€º Materials categories overview updates when category filter is applied (23.0s)
  âœ“  20 tests/dashboard.spec.ts:400:3 â€º RecentTransactionsTable â€º Recent transactions table displays with correct column headers (14.7s)
  âœ“  19 tests/dashboard.spec.ts:251:3 â€º LowInventoryAlerts â€º Low inventory alerts section shows empty state when no materials are below reorder point (32.4s)
  âœ“  21 tests/dashboard.spec.ts:419:3 â€º RecentTransactionsTable â€º Recent transactions table shows transaction rows with correct data (16.4s)
  âœ“  22 tests/dashboard.spec.ts:438:3 â€º RecentTransactionsTable â€º Recent transactions table shows multiple transactions in reverse chronological order (31.0s)
  âœ“  23 tests/dashboard.spec.ts:466:3 â€º RecentTransactionsTable â€º View Full Details link navigates to TransactionDetailPage (28.5s)
  âœ“  24 tests/dashboard.spec.ts:485:3 â€º RecentTransactionsTable â€º View All Transactions link navigates to TransactionsPage (34.2s)
  âœ“  26 tests/dashboard.spec.ts:534:3 â€º RecentTransactionsTable â€º Recent transactions table shows empty state when no transactions exist (43.5s)
  âœ“  25 tests/dashboard.spec.ts:495:3 â€º RecentTransactionsTable â€º Recent transactions table updates when date range filter is applied (1.4m)
  âœ“  27 tests/dashboard.spec.ts:553:3 â€º DateRangeFilter â€º Date range filter displays with label, date range, and calendar icon (29.0s)
  âœ“  28 tests/dashboard.spec.ts:568:3 â€º DateRangeFilter â€º Clicking the date range picker opens a calendar to select dates (36.4s)
  âœ“  30 tests/dashboard.spec.ts:618:3 â€º CategoryFilter â€º Category filter displays as a dropdown with "All Categories" default (38.0s)
  âœ“  29 tests/dashboard.spec.ts:584:3 â€º DateRangeFilter â€º Selecting a new date range updates all dashboard widgets (1.1m)
  âœ“  31 tests/dashboard.spec.ts:631:3 â€º CategoryFilter â€º Opening the category filter dropdown lists all material categories (40.1s)
  âœ“  32 tests/dashboard.spec.ts:661:3 â€º CategoryFilter â€º Selecting a category filters dashboard content to that category (51.4s)
  âœ“  34 tests/dashboard.spec.ts:717:3 â€º NewTransactionButton â€º New Transaction button is displayed prominently with plus icon (42.1s)
  âœ“  33 tests/dashboard.spec.ts:686:3 â€º CategoryFilter â€º Selecting "All Categories" resets the filter to show all data (1.3m)
  âœ“  35 tests/dashboard.spec.ts:733:3 â€º NewTransactionButton â€º Clicking New Transaction button navigates to NewTransactionPage (25.4s)
[replay.io]: Finishing up. This should only take a moment ...


  35 passed (8.6m)

--- Cleaning up ---
Deleting ephemeral branch: test-worker-1771973109241-f3fywb
Test script failed: TypeError: fetch failed
    at node:internal/deps/undici/undici:14902:13
    at async deleteBranch (/repo/apps/InventoryTracker/scripts/test.ts:76:15)
    at async main (/repo/apps/InventoryTracker/scripts/test.ts:310:5) {
  [cause]: Error: write ETIMEDOUT
      at WriteWrap.onWriteComplete [as oncomplete] (node:internal/stream_base_commons:87:19)
      at handleWriteReq (node:internal/stream_base_commons:59:21)
      at writeGeneric (node:internal/stream_base_commons:148:15)
      at Socket._writeGeneric (node:net:966:11)
      at Socket._write (node:net:978:8)
      at writeOrBuffer (node:internal/streams/writable:572:12)
      at _write (node:internal/streams/writable:501:10)
      at Writable.write (node:internal/streams/writable:510:10)
      at writeBuffer (node:internal/deps/undici/undici:6714:20)
      at writeH1 (node:internal/deps/undici/undici:6616:9) {
    errno: -110,
    code: 'ETIMEDOUT',
    syscall: 'write'
  }
}
